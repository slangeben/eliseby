<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLICK for press files!</title>
<style>
  body { 
    font-family: "Times New Roman", serif; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    background: white; 
    color: blue; 
    overflow: hidden;
    position: relative;
  }

  #login, #content { 
    display: none; 
    flex-direction: column; 
    align-items: center; 
    position: relative; 
    z-index: 1;
    text-align: center;
    background-color: white;
  }

  input { 
  padding: 8px; 
  margin: 16px 0; 
  font-family: "Times New Roman", serif;
  font-size: 1rem; 
  text-align: center;
  z-index: 105;


  border: 2px solid blue;   
  border-radius: 4px;        
  background-color: white; 
  opacity: 1;
  color: blue;              
}
input::placeholder {
  color: blue;
  opacity: 0.5;
  z-index: 5;
}

  button { 
    padding: 8px 16px; 
    cursor: pointer; 
    font-family: "Times New Roman", serif;
    font-size: 30px;
    text-decoration: underline;
    background-color: white;
    border: 0;
    color: blue; 
    z-index: 5;
  }

  ul { 
    list-style: none; 
    padding: 0; 
  }

  a { 
    color: blue; 
    text-decoration: underline; 
    font-family: "Times New Roman", serif;
  }

  a:hover { 
    color: red; 
  }


  .click-phrase {
  position: absolute;
  font-family: "Times New Roman", serif;
  font-size: 16px;
  color: #0000ff;
  text-decoration: underline;
  pointer-events: none;
  user-select: none;
  animation: drift 10s linear infinite;
  z-index: 1;
  white-space: nowrap;
}

  @keyframes drift {
    0% { transform: translateX(0px) translateY(0px) rotate(0deg); }
    50% { transform: translateX(50px) translateY(-10px) rotate(10deg); }
    100% { transform: translateX(0px) translateY(0px) rotate(0deg); }
  }
</style>
</head>
<body>

<div id="login">
  <!--<h2>enter password</h2> -->
  <input type="password" id="password" placeholder="password">
  <button onclick="checkPassword()">CLICK to enter!</button>
  <p id="error" style="color:hotpink; display:none;">incorrect password</p>
</div>

<div id="content">
  <h2>Protected Files</h2>
  <ul id="fileList"></ul>
</div>

<script>
  const passwordHash = '1d8858c892ee8dc6c396fea602b4833adb599478c2050ff3e17ff602b192f105';
  const files = [
    { name: "File 1", url: "file1.ext" },
    { name: "File 2", url: "file2.ext" },
    { name: "File 3", url: "file3.ext" }
  ];

  async function checkPassword() {
    const input = document.getElementById('password').value;
    const hashBuffer = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(input));
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

    if (hashHex === passwordHash) {
      document.getElementById('login').style.display = 'none';
      document.getElementById('content').style.display = 'flex';

      const ul = document.getElementById('fileList');
      files.forEach(file => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = file.url;
        a.download = file.url;
        a.textContent = file.name;
        li.appendChild(a);
        ul.appendChild(li);
      });
    } else {
      document.getElementById('error').style.display = 'block';
    }
  }

  // Show login on page load
  document.getElementById('login').style.display = 'flex';

  // Floating "CLICK! to ..." phrases
  const phrases = [
    "CLICK to apologize!",
    "CLICK to be saved!",
    "CLICK to forgive!",
    "CLICK to forget!",
    "CLICK to be pure!",
    "CLICK to be loved!"
  ];

function createFloatingPhrase() {
  const phrase = document.createElement('div');
  phrase.classList.add('click-phrase');
  phrase.textContent = phrases[Math.floor(Math.random() * phrases.length)];
  phrase.style.whiteSpace = "nowrap"; // no line breaks
  document.body.appendChild(phrase);

  // measure phrase
  const phraseRect = phrase.getBoundingClientRect();
  let left, top, attempts = 0;
  const padding = 10;

  // get login box area to avoid
  const loginBox = document.getElementById('login').getBoundingClientRect();

  do {
    left = Math.random() * (window.innerWidth - phraseRect.width);
    top = Math.random() * (window.innerHeight - phraseRect.height);
    attempts++;
  } while (
    (
      // avoid overlap with other floating phrases
      Array.from(document.getElementsByClassName('click-phrase')).some(el => {
        if (el === phrase) return false;
        const rect = el.getBoundingClientRect();
        return !(
          left + phraseRect.width + padding < rect.left ||
          left > rect.right + padding ||
          top + phraseRect.height + padding < rect.top ||
          top > rect.bottom + padding
        );
      })
    )
    ||
    (
      // avoid overlap with login area
      !(left + phraseRect.width < loginBox.left - padding ||
        left > loginBox.right + padding ||
        top + phraseRect.height < loginBox.top - padding ||
        top > loginBox.bottom + padding)
    )
  && attempts < 50);

  phrase.style.left = left + "px";
  phrase.style.top = top + "px";
  phrase.style.fontSize = 12 + Math.random() * 24 + "px";

  // remove after 10s
  setTimeout(() => phrase.remove(), 10000);
}

// spawn new phrase every 500ms
setInterval(createFloatingPhrase, 500);
</script>
</body>
</html>
